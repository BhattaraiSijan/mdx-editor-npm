{"version":3,"file":"link-reference.js","sources":["../../../../../../../node_modules/mdast-util-to-markdown/lib/handle/link-reference.js"],"sourcesContent":["/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {LinkReference, Parents} from 'mdast'\n */\n\nlinkReference.peek = linkReferencePeek\n\n/**\n * @param {LinkReference} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function linkReference(node, _, state, info) {\n  const type = node.referenceType\n  const exit = state.enter('linkReference')\n  let subexit = state.enter('label')\n  const tracker = state.createTracker(info)\n  let value = tracker.move('[')\n  const text = state.containerPhrasing(node, {\n    before: value,\n    after: ']',\n    ...tracker.current()\n  })\n  value += tracker.move(text + '][')\n\n  subexit()\n  // Hide the fact that we’re in phrasing, because escapes don’t work.\n  const stack = state.stack\n  state.stack = []\n  subexit = state.enter('reference')\n  // Note: for proper tracking, we should reset the output positions when we end\n  // up making a `shortcut` reference, because then there is no brace output.\n  // Practically, in that case, there is no content, so it doesn’t matter that\n  // we’ve tracked one too many characters.\n  const reference = state.safe(state.associationId(node), {\n    before: value,\n    after: ']',\n    ...tracker.current()\n  })\n  subexit()\n  state.stack = stack\n  exit()\n\n  if (type === 'full' || !text || text !== reference) {\n    value += tracker.move(reference + ']')\n  } else if (type === 'shortcut') {\n    // Remove the unwanted `[`.\n    value = value.slice(0, -1)\n  } else {\n    value += tracker.move(']')\n  }\n\n  return value\n}\n\n/**\n * @returns {string}\n */\nfunction linkReferencePeek() {\n  return '['\n}\n"],"names":["linkReference","linkReferencePeek","node","_","state","info","type","exit","subexit","tracker","value","text","stack","reference"],"mappings":"AAKAA,EAAc,OAAOC;AASd,SAASD,EAAcE,GAAMC,GAAGC,GAAOC,GAAM;AAClD,QAAMC,IAAOJ,EAAK,eACZK,IAAOH,EAAM,MAAM,eAAe;AACxC,MAAII,IAAUJ,EAAM,MAAM,OAAO;AACjC,QAAMK,IAAUL,EAAM,cAAcC,CAAI;AACxC,MAAIK,IAAQD,EAAQ,KAAK,GAAG;AAC5B,QAAME,IAAOP,EAAM,kBAAkBF,GAAM;AAAA,IACzC,QAAQQ;AAAA,IACR,OAAO;AAAA,IACP,GAAGD,EAAQ,QAAO;AAAA,EACtB,CAAG;AACD,EAAAC,KAASD,EAAQ,KAAKE,IAAO,IAAI,GAEjCH,EAAO;AAEP,QAAMI,IAAQR,EAAM;AACpB,EAAAA,EAAM,QAAQ,CAAA,GACdI,IAAUJ,EAAM,MAAM,WAAW;AAKjC,QAAMS,IAAYT,EAAM,KAAKA,EAAM,cAAcF,CAAI,GAAG;AAAA,IACtD,QAAQQ;AAAA,IACR,OAAO;AAAA,IACP,GAAGD,EAAQ,QAAO;AAAA,EACtB,CAAG;AACD,SAAAD,EAAO,GACPJ,EAAM,QAAQQ,GACdL,EAAI,GAEAD,MAAS,UAAU,CAACK,KAAQA,MAASE,IACvCH,KAASD,EAAQ,KAAKI,IAAY,GAAG,IAC5BP,MAAS,aAElBI,IAAQA,EAAM,MAAM,GAAG,EAAE,IAEzBA,KAASD,EAAQ,KAAK,GAAG,GAGpBC;AACT;AAKA,SAAST,IAAoB;AAC3B,SAAO;AACT;","x_google_ignoreList":[0]}